\section{Technical Design Considerations}
\label{reuse}

The data management is the most significant part of the \ivfsystem{} and therefore should be well implemented.
Also implementation had to be done in a short time due to study planning restrictions, which were a result from the earlier mentioned data gathering difficulties.
To speed up development multiple systems were considered and evaluated for reuse.
Systems that have properties of clinical data management were sought for.
From a list of systems three were included in an more in-depth evaluation presented below.

\paragraph{Software reuse}
The external software was identified through the paper by Leroux \cite{leroux2011}, in which five systems are listed: Oracle Clinical \cite{oracle}, InForm\footnote{The InForm software seems to be under the property of Oracle}, Rave \cite{rave}, DADOS Prospective \cite{dados}, and OpenClinica \cite{openclinica}.
One additional system was found through internal communication within the AMC, namely Castor \cite{castor}.
The last system is an in-house project called Rosemary \cite{rosemary} developed at the same department in which this study was conducted.

All systems, except for Rosemary, are clinical trial management (CTM) software.
Their focus lies on data entry and retrieval for low-level (researcher) users, and on research overview for high-level (management) users.
Besides data entry, they also offer overviews displaying statistics on participants and the clinics they belong to, how many inclusions were made, follow-up percentages, etc.
Rosemary is built to handle neuroimaging data and metadata, data analysis applications, and their execution on grid infrastructures.

Four of the CTM systems are delivered under a proprietary license: Oracle Clinical, InForm, Castor, and Rave.
Castor has a fair use for small trials: it is available for free for up to a maximum of 200 inclusions or 12 months study duration.
However, the identified functions of the \ivfsystem{} demand that significant extensions are made to these four systems to accommodate requirements.
One firm requirement of the systems that are considered is that they have to be open-source to accommodate this.
Therefore, these systems were not included for the in-depth evaluation presented below.

\paragraph{Evaluation: external systems}
The open-source external systems identified were OpenClinica and DADOS Prospective.
Both systems were evaluated, OpenClinica based on their online demo and DADOS Prospective based on their publication.

These are both CTM software and have approximately the same purpose of providing per study data recording.
Data collection protocols can be defined in a very flexible manner.
After the protocol has been defined, it is fixed for all study participants.
This is very useful in longitudinal studies, where collection should be standardised for study quality and analysis purposes.
Also, the data model has already been proven by the fact that many researchers use these systems.

In principle, as far as could be determined by our brief evaluation, the desired options for data reuse are not supported.
Reuse in these systems is at a study level, which means that when a user is made a member of a study, he/she can see and use all the data within the study.
The philosophy for the \ivfsystem{} is to provide external data requests on a pool of data, which makes the model of the CTM systems less useful for this case.

\paragraph{Evaluation: In-house project}
In Rosemary the data consists of brain images generated by Magnetic Resonance Imaging (MRI) scanners, and the metadata refers to the subjects, the imaging session, etc. 
References to images are imported into the system from external data servers (XNAT \cite{xnat}), selected by the user, and submitted for processing by analysis applications. 
Result are also stored in the system and used in further analysis.
Data input is restricted to automated functions and there are no manual input interfaces available.

The philosophy of Rosemary is to support researchers with managing of data, processing, and community.
Data challenges are tackled by providing extensive search, filter, and selection functionality.
Processing management is handled by automatically bundling submissions into processings, which are then fed to one or multiple applications. As this is rather uninteresting for the \ivfsystem{} case, it will not be discussed any further.
And lastly, community is currently supported through descriptive notifications, messaging, and the notion of a `workspace'.
A workspace contains a set of data. A researcher or the system may define a workspace and share this with their colleagues by adding them as members.

To fulfil the data management functionality, each single item of data (called a `datum') can be supplemented with metadata.
%Data is given meaning through this metadata, which works both at the  human level (user) but also at the  system level.
%Metadata can be free text, but the system also uses some predefined objects.
%The most important metadata object is the `Tag', which can be appended to a datum and can fulfil multiple roles. 
%One of these roles is, for example, the identification of workspaces to which a datum belongs.
Based on metadata the researcher can search and order their data.
When data is added to the workspace a powerful search functionality is provided.
It supports searches on the datum level, and also on the metadata level.
Initially the search is text-based and very fuzzy, but with the use of a query language the user can make the search specific.
This query language ranges from keywords like `and/or' to restriction of search based on the name of a metadata field (\eg{} search for `patient123' but only in the field named `subject', search syntax: ``subject:patient123'').

\paragraph{The better pick}
Based on several considerations, the decision was made to use the in-house Rosemary project for further development.
The manner in which data and metadata are applied makes  the data model of Rosemary very flexible.
This is less useful for longer running projects which require very strict data entry rules.
However, for the \ivfsystem{} data is an immutable set, namely the \projectdata{}.
After a small survey it turned out that the dataset could be used directly with the existing data model.

Because Rosemary is an in-house project the survey to check the data model could be done directly with the lead developers, which brings us to the next consideration.
Short lines of communication to expertise are useful for a quick development process, because once a (coding) problem is encountered it can be solved in a matter of hours.

Lastly, Rosemary tackles data management challenges by providing extensive search, filter, and selection functionality.
Furthermore, notifications and messaging are supported.
All of these functions are useful to some extent for the requirements of the \ivfsystem{}.